MODULE VEDScript;

REQUIRE System, VEDLogicsModule;

nameOrderUser 'Исп-ль заказа' (order) = nameContact(orderUser(order));

FORM discountCards 'Дисконтные карточки'
    OBJECTS c=customerCheckRetail
    PROPERTIES(c) barcode, name, checkRetailCustomerPhone, checkRetailCustomerBorn, checkRetailCustomerAddress, clientInitialSum, clientSum
;

FORM discountCardChecks 'Движение по дисконтным карточкам'
    OBJECTS c=customerCheckRetail
    PROPERTIES(c) barcode, name, checkRetailCustomerPhone, checkRetailCustomerBorn, checkRetailCustomerAddress, clientInitialSum, clientSum
    OBJECTS ch=orderRetail
    PROPERTIES(ch) date, OBJVALUE, orderHour, orderMinute, nameSubjectOutOrder, nameOrderUser, sumWithDiscountOrder, discountSumOrder, orderSalePayObligation, sumWithDiscountObligationOrder, orderSalePayCash, orderSalePayCard, orderBirthDay, orderNoDiscount
    FILTERS subjectIncOrder(ch)==c
;

NAVIGATOR {
    classifier {
        ADD discountCards;
        ADD discountCardChecks;
    }
}