MODULE CustomsGroupItem;

REQUIRE CustomsGroup, Item;

customsGroupCountryItem = DATA CustomsGroup(Country, Item);
codeCustomsGroupCountryItem 'ТН ВЭД' (country, item) = codeCustomsGroup(customsGroupCountryItem(country, item));

customsGroupCountrySku(country, sku) += customsGroupCountryItem(country, sku);

CONSTRAINT customsZoneCustomsGroup(customsGroupCountryItem(country, item)) != customsZoneCountry(country) CHECKED BY customsGroupCountryItem
    MESSAGE 'Таможенная зона должна соответствовать стране';

EXTEND FORM item
    PROPERTIES(c, i) codeCustomsGroupCountryItem
;

overCopyItem(s, d) += ACTION (s, d) {
    ASSIGN customsGroupCountryItem(c,d) <- customsGroupCountryItem(c,s) WHERE customsGroupCountryItem(c,s);
}

