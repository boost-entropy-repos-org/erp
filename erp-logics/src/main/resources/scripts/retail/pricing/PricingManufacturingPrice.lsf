MODULE PricingManufacturingPrice;

REQUIRE Pricing, PriceListLedger, PurchaseManufacturingPrice;

@defineDocumentInterfaceDetailPriceCustomPrefix(pricingDetail, manufacturing, ' изготовителя');

//@deriveDocumentDetailPriceSystemLedgerPriceListType(userPricing, manufacturingPriceStockPriceListType, manufacturing, sku, departmentStore);
@deriveDocumentDetailPriceSystemLedgerPriceListTypeBatch (userPricing, manufacturingPriceStockPriceListType, manufacturing, sku, departmentStore);

overPricingPrice[UserPricingDetail](UserPricingDetail detail) += manufacturingPrice(detail);

//@changeDocumentDetailPricePrefix(userPricingDetail, manufacturing, retail, retail, manufacturing, retail, retail);

EXTEND FORM userPricing
    PROPERTIES(d) manufacturingPrice BEFORE price(d) //ON CHANGE changeManufacturingPriceUserPricingDetail(d)
;

EXTEND FORM pricings
    PROPERTIES(d) READONLY manufacturingPrice BEFORE price(d)
;

skipCalcPricingManufacturingPrice 'Делать расценку от входной цены, а не цены изготовителя' = DATA BOOLEAN();
EXTEND FORM options
    PROPERTIES() skipCalcPricingManufacturingPrice 
;

DESIGN options {
    invoices {
        MOVE PROPERTY(skipCalcPricingManufacturingPrice());
    }
}