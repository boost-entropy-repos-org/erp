MODULE PricingSalePurchaseSalePricing;

REQUIRE PricingSalePurchase, PricingSale;

NAMESPACE Sale;

isRetailInvoice = customerStockInvoice(invoice) IS DepartmentStore AND supplierStockInvoice(invoice) IS DepartmentStore;

//копирование розничных цен при заполнении накладной по накладной
setPropertiesPurchaseInvoiceDetailSaleInvoiceDetail(d, invoiceDetail) += ACTION (d, invoiceDetail) {
    Purchase.retailPriceUserInvoiceDetail(d) <- retailPriceInvoiceDetail(invoiceDetail) IF isRetailInvoice(invoiceInvoiceDetail(invoiceDetail));
    Purchase.retailVATUserInvoiceDetail(d) <- retailVATUserInvoiceDetail(invoiceDetail) IF isRetailInvoice(invoiceInvoiceDetail(invoiceDetail));
    Purchase.valueRetailVATUserInvoiceDetail(d) <- valueRetailVATUserInvoiceDetail(invoiceDetail) IF isRetailInvoice(invoiceInvoiceDetail(invoiceDetail));
}