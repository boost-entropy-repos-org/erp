MODULE POSDiscountCard;

REQUIRE POS, ZReportDiscountCard;

NAMESPACE POS;

overChangeBarcodeDiscountCard = ACTION (string, receipt) {
    IF discountCardSeriesNumber(string) AND receipt IS Receipt AND string IS STRING[15] THEN {
        discountCardReceipt(receipt) <- discountCardSeriesNumber(string); 
        consumedChangeBarcodeSaleReceipt() <- TRUE;
    }
} TOOLBAR;

overChangeBarcodeSaleReceipt(string, receipt) += overChangeBarcodeDiscountCard(string, receipt);

