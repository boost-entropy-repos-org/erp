MODULE RepricingDashboardBatch;

REQUIRE RepricingDashboard, RepricingPriceListBatch;

NAMESPACE Repricing;
EXTEND FORM repricingDashboard
    OBJECTS bt=Batch
    PROPERTIES(bt)          inDashboardRepricingBatch//, selectBatch
    PROPERTIES(bt) READONLY idBarcodeSkuBatch, idSkuBatch, nameSkuBatch, shortNameUOMBatch
    PROPERTIES     READONLY dateTimeBatch(bt), seriesNumberBatch(bt), nameSupplierBatch(bt), currentBalanceBatchStock(bt,d), managementRetailPriceBatch(bt), retailPricingPriceBBatchStockDateTime(bt,d,t) 
    PROPERTIES (d,o,t)  TODRAW bt FORCE PANEL TOOLBAR calculateDashboardManagementRepricingBatch, createDashboardRepricingBatch
                                              
//    PROPERTIES() READONLY countSelectBatchs SHOWIF countSelectBatchs() TODRAW bt                                          
    FILTERS inDashboardRepricingBatch(bt), isParentSkuGroupSku(sg, skuBatch(bt)) 
;
DESIGN repricingDashboard {
    skuBox {
        type = SPLITH;
        fill = 1;
        MOVE skuTree.tree.box { caption = 'Группы SKU'; fill=0.5; }
        NEW detail {
            fill = 1;
            type = TABBED;
            MOVE sk.box {
                caption = 'Товары, для которых необходима переоценка';
                PROPERTY(retailPricingPriceBSkuStockDateTime(sk,d,t)) {
                    caption = 'Цена (текущая)';
                }
            }
            MOVE bt.box {
                caption = 'Партии, для которых необходима переоценка';
                PROPERTY(retailPricingPriceBBatchStockDateTime(bt,d,t)) {
                    caption = 'Цена (текущая)';
                }
            }            
        }
    }
}