MODULE PurchaseShipmentLabel;

REQUIRE Label, PurchaseShipment;

NAMESPACE Purchase;

// ------------------------------------- Печать ценников ------------------------------ //

@Label.implementPriceTransactionDocument(Invoice);
@defineDocumentLabelTransaction(invoice, sku, customerStock, shipment);

showToPrintLabelTransactionInvoice 'Показывать' (invoice) = isPostedInvoice(invoice) AND NOT 
                                                            Label.skipPriceTransactionDocument(invoice) AND // OR printedPriceTransactionDocument(invoice)
                                                            customerStockInvoice(invoice) IS DepartmentStore;

EXTEND FORM invoices
PROPERTIES(i) statusLabelPriceTransactionDocument  BACKGROUND backgroundPrintLabelTransactionInvoice(i) READONLY AFTER isCommissionInvoice(i),
              createInvoiceLabelTransaction FORCE PANEL SHOWIF showToPrintLabelTransactionInvoice(i), 
              createSnapshotInvoiceLabelTransaction SHOWIF isPostedInvoice(i)
;
DESIGN invoices {
    machineryContainer{
        NEW label {
            caption = 'Ценники' ;
            type = CONTAINERV;    
            
            MOVE PROPERTY (createInvoiceLabelTransaction(i));
            MOVE PROPERTY (createSnapshotInvoiceLabelTransaction(i));
        }
    }
}
