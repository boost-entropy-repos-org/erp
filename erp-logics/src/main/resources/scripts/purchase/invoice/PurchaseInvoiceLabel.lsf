MODULE PurchaseShipmentLabel;

REQUIRE Label, PurchaseShipment;

NAMESPACE Purchase;

// ------------------------------------- Печать ценников ------------------------------ //

@Label.implementPriceTransactionDocument(Invoice);

@defineDocumentLabelTransaction(invoice, sku, overBatch, customerStock, shipment);

showToPrintLabelTransaction 'Показывать' (Invoice invoice) = isPosted(invoice) AND NOT 
                                                            skip[PriceTransactionDocument](invoice) AND // OR printedPriceTransactionDocument(invoice)
                                                            customerStock(invoice) IS DepartmentStore;

EXTEND FORM invoices
PROPERTIES(i) statusLabel  BACKGROUND backgroundPrintLabelTransaction(i) READONLY AFTER isCommission(i),
              createLabelTransaction PANEL SHOWIF showToPrintLabelTransaction(i), 
              createSnapshotLabelTransaction SHOWIF isPosted(i)
;
DESIGN invoices {
    machineryContainer{
        NEW label {
            caption = 'Ценники' ;
            type = CONTAINERV;    
            
            MOVE PROPERTY (createLabelTransaction(i));
            MOVE PROPERTY (createSnapshotLabelTransaction(i));
        }
    }
}
