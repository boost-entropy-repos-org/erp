MODULE PurchaseReturnOrderTax;

REQUIRE PurchaseReturnOrder, SkuLedgerTax;

NAMESPACE PurchaseReturn;

over1VATUserOrderDetail(detail) += VATBatch(batchUserOrderDetail(detail));
overSetValueVATUserOrderDetail(detail) += valueVATBatch(batchUserOrderDetail(detail)) IF valueVATBatch(batchUserOrderDetail(detail)) != 0;

// todo : временное решение, пока нету последовательности выполнения событий
WHEN SESSION FORMS userOrder CHANGED(batchUserOrderDetail(d)) AND valueVATBatch(batchUserOrderDetail(d)) != 0 DO {
    valueVATUserOrderDetail(d) <- valueVATBatch(batchUserOrderDetail(d)); 
}
