MODULE PurchaseAgreement;

REQUIRE Agreement, Purchase;

NAMESPACE  Purchase;

// ----------------------------------------------- Виды цен --------------------------------- //

purchasePriceListType = DATA PriceListType ();
namePurchasePriceListType 'Вид цены (закупка) по умолчанию для соглашения' = namePriceListType(purchasePriceListType());

purchaseReturnPriceListType = DATA PriceListType ();
namePurchaseReturnPriceListType 'Вид цены (закупка) по умолчанию для соглашения' = namePriceListType(purchaseReturnPriceListType());

EXTEND FORM options PROPERTIES() namePurchasePriceListType, namePurchaseReturnPriceListType;
DESIGN options {
    purchase {
        MOVE PROPERTY(namePurchasePriceListType());        
        MOVE PROPERTY(namePurchaseReturnPriceListType());        
    }    
}

WHEN SESSION FORMS agreement, legalEntity
    SET(isPurchaseAgreement(a)) DO {
        priceListTypeAgreement (a) <- purchasePriceListType();
        returnPriceListTypeAgreement (a) <- purchaseReturnPriceListType();
    } 