MODULE PriceListPurchase;

REQUIRE PurchaseLedger, PriceList;

NAMESPACE PriceList;

filterSupplierUserPriceList = DATA LOCAL LegalEntity (UserPriceList);
nameFilterSupplierUserPriceList 'Поставщик' (userPriceList) = nameLegalEntity(filterSupplierUserPriceList(userPriceList));
filterSupplierUserPriceListSku (userPriceList, sku) = prevInSupplierSku(filterSupplierUserPriceList(userPriceList), sku) OR
                                              (sku IS Sku AND NOT filterSupplierUserPriceList(userPriceList));
                                              
filterSupplierUserPriceListBatch (userPriceList, batch) = 
    supplierBatch(batch) == filterSupplierUserPriceList(userPriceList) OR (batch IS Batch AND NOT filterSupplierUserPriceList(userPriceList));                                  

EXTEND FORM userPriceList
    PROPERTIES(p) FORCE PANEL nameFilterSupplierUserPriceList
    FILTERS filterSupplierUserPriceListSku(p, s2),
            filterSupplierUserPriceListBatch(p, b)
;

DESIGN userPriceList {
    filtersContainer {
        ADD PROPERTY(nameFilterSupplierUserPriceList(p));
    }
}