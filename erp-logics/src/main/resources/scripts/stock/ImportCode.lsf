MODULE ImportCode;

REQUIRE Integration;

NAMESPACE Stock;

CLASS ImportCode 'Код импорта';
TABLE importCode(ImportCode);

id 'Код' = DATA VARSTRING[100] (ImportCode) IN recognize INDEXED CHARWIDTH 10;

META defineImportCode(objectCalss, form, obj, obj2)

    @defineExternalizable(importCode, VARSTRING[100], obj2);
    obj2 = DATA objectCalss (ImportCode);    
    
    EXTEND FORM form
        OBJECTS obj = ImportCode
        PROPERTIES(obj) obj2##Id, NEW, DELETE GRID
        
        FILTERS obj2(obj)==obj2
    ;
    
    DESIGN form {
        obj2##TabBottomContainer{
            MOVE BOX(obj);
        }
    }
    
    overReplace(objectCalss s, objectCalss d) += {obj2(ImportCode code) <- s WHERE obj2(code) == d;}
END