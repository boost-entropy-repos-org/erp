MODULE SkuImportCode;

REQUIRE Item;

NAMESPACE Stock;

CLASS ImportCode 'Код импорта';

@defineExternalizable(importCode, VARSTRING[100],);

sku = DATA Sku (ImportCode);

skuImportCode (VARSTRING[100] importCode) = sku(importCode(importCode));

EXTEND FORM item
    OBJECTS ii = ImportCode
    PROPERTIES(ii) id, ADDOBJ, DELETE 
    
    FILTERS sku(ii)==i
;

DESIGN item {
    tabContaner{
        MOVE ii.box;
    }
}

replace(Sku s, Sku d) += ACTION {sku(ImportCode code) <- d WHERE sku(code) == s;}