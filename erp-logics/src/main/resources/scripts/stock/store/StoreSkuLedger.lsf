MODULE StoreSkuLedger;

REQUIRE Store, SkuLedger;

NAMESPACE Store;

explicitBatchLedgerDepartmentStore 'Партионный учет' = DATA BOOLEAN (DepartmentStore);
explicitBatchLedgerStock(stock) += explicitBatchLedgerDepartmentStore(stock);

EXTEND FORM departmentStore
    PROPERTIES(d) explicitBatchLedgerDepartmentStore
;

EXTEND DESIGN departmentStore {
    headerExtraParams {
        ADD PROPERTY(explicitBatchLedgerDepartmentStore);
    }
}

balanceASkuStoreDateTime(sku, stock, dateTime) =
    GROUP SUM balanceASkuStockDateTime(sku, stock, dateTime)
    BY sku, storeDepartmentStore(stock), dateTime;
