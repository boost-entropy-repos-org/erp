MODULE ExportGeneralLedger;

REQUIRE System, GeneralLedger, Dimension;
                                                     
//---------------------------------------------- Экспорт данных -----------------------------------------------------//

GROUP export 'Экспорт' : public;

exportGeneralLedgerDBFDataAction 'Экспортировать проводки' = ACTION CUSTOM 'lsfusion.erp.integration.export.ExportGeneralLedgerDBFActionProperty' () IN export;
dateFromExportGeneralLedgerDBF 'Дата с' = DATA DATE () IN export;
dateToExportGeneralLedgerDBF 'Дата по' = DATA DATE () IN export;
legalEntityExportGeneralLedgerDBF = DATA LegalEntity () IN export;
nameLegalEntityExportGeneralLedgerDBF 'Организация'() = nameLegalEntity(legalEntityExportGeneralLedgerDBF());
GLAccountTypeExportGeneralLedgerDBF = DATA GLAccountType () IN export;
nameGLAccountTypeExportGeneralLedgerDBF 'План счетов'() = nameGLAccountType(GLAccountTypeExportGeneralLedgerDBF());

EXTEND FORM integrationData
    PROPERTIES() exportGeneralLedgerDBFDataAction, dateFromExportGeneralLedgerDBF, dateToExportGeneralLedgerDBF,
        nameLegalEntityExportGeneralLedgerDBF, nameGLAccountTypeExportGeneralLedgerDBF
;
DESIGN integrationData {
    pane {        
        NEW export {
            caption = 'Экспорт';
            ADD NOGROUP.export {
                type = CONTAINERV;                
                NEW generalLedgers {
                    caption = 'Проводки';
                    type = CONTAINERH; 
                    ADD PROPERTY(dateFromExportGeneralLedgerDBF());
                    ADD PROPERTY(dateToExportGeneralLedgerDBF());
                    ADD PROPERTY(nameLegalEntityExportGeneralLedgerDBF());
                    ADD PROPERTY(nameGLAccountTypeExportGeneralLedgerDBF());
                    ADD PROPERTY(exportGeneralLedgerDBFDataAction());
                }                
            };
        }
    }
}