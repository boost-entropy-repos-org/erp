MODULE PostgreSQLUtils;

REQUIRE System;

getActiveTasksPostgreSQLAction 'Обновить список процессов' = ACTION CUSTOM 'lsfusion.erp.utils.GetActiveTasksPostgreSQLActionProperty' TOOLBAR;  
cancelActiveTaskPostgreSQLAction 'Снять процесс' = ACTION CUSTOM 'lsfusion.erp.utils.CancelActiveTaskPostgreSQLActionProperty';  

previousCountActiveTask =  DATA SESSION INTEGER();
idActiveTask 'ID процесса' = DATA SESSION INTEGER (INTEGER);
queryActiveTask 'Запрос' = DATA SESSION TEXT (INTEGER);
userActiveTask 'Пользователь' = DATA SESSION VARSTRING[100] (INTEGER);
addressUserActiveTask 'Адрес пользователя' = DATA SESSION VARSTRING[100] (INTEGER);
dateTimeActiveTask 'Время запуска' = DATA SESSION DATETIME (INTEGER);


FORM activeTasksPostgreSQL 'Активные процессы' 
    OBJECTS i = INTEGER
    PROPERTIES(i) READONLY idActiveTask, queryActiveTask, userActiveTask, addressUserActiveTask, dateTimeActiveTask
    PROPERTIES(i) cancelActiveTaskPostgreSQLAction
    PROPERTIES() getActiveTasksPostgreSQLAction
    FILTERS idActiveTask(i)
;



NAVIGATOR {
    application {
        ADD activeTasksPostgreSQL;
    }
}
