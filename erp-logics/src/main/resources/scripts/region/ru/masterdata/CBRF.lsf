MODULE CBRF;

REQUIRE System,
        Currency,
        CurrencyRu;


//---------------------------------------------- Импорт курсов ЦБРФ -----------------------------------------------------//

GROUP cbrf 'Курсы ЦБРФ' : public;

importCBRFExchangeRateDateFrom 'Дата с' = DATA DATE () IN cbrf;
importCBRFExchangeRateDateTo 'Дата по' = DATA DATE () IN cbrf;

importCBRFExchangeRateAction 'Импортировать курс ЦБРФ' = ACTION CUSTOM 'lsfusion.erp.region.ru.masterdata.ImportCBRFExchangeRateActionProperty' IN cbrf;

importCBRFExchangeRate 'Импортировать курсы ЦБРФ' = ACTION () {
    FOR c IS Currency DO {
        EXEC importCBRFExchangeRateAction(c);
    }
    EXEC apply();
} IN cbrf;

EXTEND FORM typeExchangeCurrencyDate
    PROPERTIES() importCBRFExchangeRateDateFrom, importCBRFExchangeRateDateTo, importCBRFExchangeRate
;

EXTEND DESIGN typeExchangeCurrencyDate {
    importExchangeRates {
        ADD NOGROUP.cbrf;
    }
}
