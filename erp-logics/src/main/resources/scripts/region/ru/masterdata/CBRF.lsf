MODULE CBRF;

REQUIRE System,
        Currency,
        CurrencyRu;


//---------------------------------------------- Импорт курсов ЦБРФ -----------------------------------------------------//

GROUP cbrfGroup 'Курсы ЦБРФ' : public;

importCBRFExchangeRateDateFrom 'Дата с' = DATA DATE () IN cbrfGroup;
importCBRFExchangeRateDateTo 'Дата по' = DATA DATE () IN cbrfGroup;

importCBRFExchangeRateAction 'Импортировать курс ЦБРФ' = ACTION CUSTOM 'lsfusion.erp.region.ru.masterdata.ImportCBRFExchangeRateActionProperty' IN cbrfGroup;

importCBRFExchangeRate 'Импортировать курсы ЦБРФ' = ACTION () {
    FOR c IS Currency DO {
        EXEC importCBRFExchangeRateAction(c);
    }
    EXEC apply();
} IN cbrfGroup;

EXTEND FORM typeExchangeCurrencyDate
    PROPERTIES() importCBRFExchangeRateDateFrom, importCBRFExchangeRateDateTo, importCBRFExchangeRate
;

EXTEND DESIGN typeExchangeCurrencyDate {
    importExchangeRates {
        ADD NOGROUP.cbrfGroup;
    }
}
