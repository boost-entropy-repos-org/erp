MODULE LabelBy;

REQUIRE Label;
NAMESPACE Label;

//-- До деноминации
priceRubB 'Рубли' (LabelTransactionDetail d) = divideInteger(price(d), 10000.0);
priceKopB 'Копейки' (LabelTransactionDetail d) = lpad((OVERRIDE '' IF priceRubB(d), VARSTRING[2](round0(abs(priceRubB(d) (-) round2(price(d) / 10000.00))*100.0))), 2, '0');

retailPriceRubB 'Рубли (цена до)' (LabelTransactionDetail d) = divideInteger(retailPrice(d), 10000.0);
retailPriceKopB 'Копейки (цена до)' (LabelTransactionDetail d) = lpad((OVERRIDE '' IF retailPriceRubB(d), VARSTRING[2](round0(abs(retailPriceRubB(d) (-) round2(retailPrice(d) / 10000.00))*100.0))), 2, '0');

discountPriceRubB 'Рубли (скидка)' (LabelTransactionDetail d) = divideInteger(discountSum(d), 10000.0);
discountPriceKopB 'Копейки (скидка)' (LabelTransactionDetail d) = lpad((OVERRIDE '' IF discountPriceRubB(d), VARSTRING[2](round0(abs(discountPriceRubB(d) (-) round2(discountSum(d) / 10000.00))*100.0))), 2, '0');

EXTEND FORM printLabelTransaction PROPERTIES(d) READONLY priceRubB, priceKopB, retailPriceRubB, retailPriceKopB, discountPriceRubB, discountPriceKopB;
EXTEND FORM customLabelTransaction PROPERTIES(d) priceRubB, priceKopB, retailPriceRubB, retailPriceKopB, discountPriceRubB, discountPriceKopB;
EXTEND FORM labelTransactions 
    PROPERTIES(dt) READONLY priceRubB, priceKopB, retailPriceRubB, retailPriceKopB, discountPriceRubB, discountPriceKopB 
    PROPERTIES(dts) READONLY priceRubB, priceKopB, retailPriceRubB, retailPriceKopB, discountPriceRubB, discountPriceKopB
;