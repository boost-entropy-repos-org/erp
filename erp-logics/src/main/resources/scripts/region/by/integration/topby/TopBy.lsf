MODULE TopBy;

REQUIRE PurchaseInvoice, Item, LegalEntityBy, Warehouse;

maxMessageNumber = DATA INTEGER (); 

GLN 'GLN' = DATA VARSTRING[13] (LegalEntity);
legalGLN (legalEntity) = GROUP AGGR LegalEntity legalEntity BY GLN(legalEntity);
GLNSupplier(UserInvoice invoice) = GLN(supplier(invoice));
GLNCustomer(UserInvoice invoice) = GLN(customer(invoice));
EXTEND FORM legalEntity PROPERTIES(l) GLN;
EXTEND FORM legalEntities PROPERTIES(l) READONLY GLN;

GLN 'GLN' = DATA VARSTRING[13] (Stock);
stockGLN (stock) = GROUP AGGR Stock stock BY GLN(stock);
EXTEND FORM warehouse PROPERTIES(w) GLN;
EXTEND FORM warehouses PROPERTIES(w) READONLY GLN;

isCancelled 'Отменена' = DATA BOOLEAN (Purchase.UserInvoice);