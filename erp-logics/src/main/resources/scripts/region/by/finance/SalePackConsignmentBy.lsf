MODULE SalePackConsignmentBy;

REQUIRE ConsignmentBy, SalePack;

NAMESPACE Sale;

calcAmountPackConsignmentDetail = 
    IF quantityConsignmentDetail(d)/amountPackSku(skuConsignmentDetail(d))>1 
        THEN NUMERIC[21,6](round0(quantityConsignmentDetail(d)/amountPackSku(skuConsignmentDetail(d))))
        ELSE 1.0 IF d IS ConsignmentDetail; 

overPackQuantityConsignmentDetail(d) += WHEN d IS ConsignmentDetail THEN calcAmountPackConsignmentDetail(d);