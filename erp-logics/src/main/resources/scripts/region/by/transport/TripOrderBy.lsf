MODULE TripBy;

REQUIRE TripOrder;

NAMESPACE Trip;

FORM printWaybillBy

    OBJECTS t=Trip FIXED PANEL
    PROPERTIES(t) date, seriesNumber, sidTruck, nameDriver, nameTruckModelTruck, trailerTruck, sidDriver, typeDriver

    OBJECTS st=Stock
    PROPERTIES(st) fullName, address, nameLegalEntity
    PROPERTIES(t, st) addressStockPrev, grossWeightTo
    PROPERTIES (st, t) number
    ORDER BY number(st, t)
    FILTERS quantity(t, st)>0, stockPrev(t, st)
    FILTERGROUP inactiveStock FILTER 'Активный' active(st) 'ctrl F10' DEFAULT
;

printWaybillBy 'Печать путевого листа' (Trip trip) = ACTION (trip) {
    FORM printWaybillBy OBJECTS t = trip PRINT;
} TOOLBAR;

EXTEND FORM trip

    PROPERTIES (t) printWaybillBy TODRAW st
;