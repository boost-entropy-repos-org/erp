MODULE TripBy;

REQUIRE Trip;

NAMESPACE Trip;

FORM printWaybillBy

    OBJECTS t=Trip FIXED PANEL
    PROPERTIES(t) dateTrip, seriesNumberTrip, sidTruckTrip, nameDriverTrip, nameTruckModelTruckTrip, trailerTruckTrip, sidDriverTrip, typeDriverTrip

    OBJECTS st=Stock
    PROPERTIES(st) fullNameStock, addressStock, nameLegalEntityStock
    PROPERTIES(t, st) addressStockPrevTripStock, grossWeightTripToStock
    PROPERTIES (st, t) numberStockTrip
    ORDER BY numberStockTrip(st, t)
    FILTERS quantityTripStock(t, st)>0, stockPrevTripStock(t, st)
    FILTERGROUP inactiveStock FILTER 'Активный склад' 'ctrl F10' activeStock(st) DEFAULT
;

printWaybillBy 'Печать путевого листа' (trip) = ACTION (trip) {
    FORM printWaybillBy OBJECTS t = trip PRINT;
} TOOLBAR;

EXTEND FORM trip

    PROPERTIES (t) printWaybillBy TODRAW st
;