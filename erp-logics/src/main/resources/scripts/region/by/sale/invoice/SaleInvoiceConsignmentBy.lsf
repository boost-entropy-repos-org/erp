MODULE SaleInvoiceConsignmentBy;

REQUIRE SaleInvoice,
        SaleOperationConsignmentBy,
        InvoiceConsignmentBy;

NAMESPACE Sale;

@defineInvoiceConsignment(supplier, customer);

@implementConsignmentDocumentHeaderPrefix (invoice, invoice, Invoice);

consignmentType (Invoice consignment) += consignmentType(operation(consignment));
dataShipmentBase (Invoice consignment) += shipmentBase(operation(consignment));
ownerTrackType (Invoice consignment) += ownerTrackType(operation(consignment));
banPrint (Invoice consignment) += WHEN banOpenedPrint(operation(consignment)) AND NOT isPosted(consignment)THEN TRUE;

@deriveConsignmentPropertyALL(supplierStock);

notUseDriverTruck(Invoice c) += notUseDriverTruck(operation(c));
isInvoicePrice(InvoiceDetail d) += isInvoicePriceConsignment(operation(d));
roundPack(InvoiceDetail d) += roundPack(operation(d));

notUseIssuanceAllowed(Invoice c) += notUseIssuanceAllowed(operation(c));
notUseIssuanceExecuted(Invoice c) += notUseIssuanceExecuted(operation(c));
notPrintGr(Invoice c) += notPrintGr(operation(c));
useGoodsAccepted(Invoice c) += useGoodsAccepted(operation(c));
skipWaybill (Invoice consignment) += WHEN skipWaybill(operation(consignment)) THEN skipWaybill(operation(consignment));
skipTruck (Invoice consignment) += WHEN skipTruck(operation(consignment)) THEN skipTruck(operation(consignment));
skipDriver (Invoice consignment) += WHEN skipDriver(operation(consignment)) THEN skipDriver(operation(consignment));