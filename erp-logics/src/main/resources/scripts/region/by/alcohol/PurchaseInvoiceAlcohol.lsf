MODULE PurchaseInvoiceAlcohol;

REQUIRE PurchaseInvoice, InvoiceAlcohol;

NAMESPACE Purchase;

@defineInvoiceAlcohol();

EXTEND FORM userInvoice
    PROPERTIES(d) nameAlcoholSupplierTypeUserInvoiceDetail
;    

alcoholDirectionTypeInvoice(i) += WHEN i IS Invoice AND isCompanyStock(customerStockInvoice(i)) AND NOT isCompanyStock(supplierStockInvoice(i)) THEN AlcoholDirectionType.income;
alcoholIncomeTypeInvoice(i) += WHEN i IS Invoice AND isCompanyStock(customerStockInvoice(i)) AND NOT isHomeCurrencyInvoice(i) THEN AlcoholIncomeType.internal;
alcoholIncomeTypeInvoice(i) += WHEN i IS Invoice AND isCompanyStock(customerStockInvoice(i)) AND isHomeCurrencyInvoice(i) THEN AlcoholIncomeType.external;

volumeInvoiceDetail(d) += volumeItem(skuInvoiceDetail(d))*quantityInvoiceDetail(d);
signetVolumeInvoiceDetail(d) += volumeItem(skuInvoiceDetail(d))*quantityInvoiceDetail(d);
