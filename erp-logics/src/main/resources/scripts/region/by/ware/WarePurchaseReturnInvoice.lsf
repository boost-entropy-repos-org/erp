MODULE WarePurchaseReturnInvoice;

REQUIRE WareInvoice, PurchaseReturnInvoice, PurchaseReturnShipment, WarePurchaseReturnOrder;

NAMESPACE PurchaseReturn;

@defineInvoiceWare(PurchaseReturn);

skipCreateUserInvoiceOrderDetail(d) += TRUE IF itemWareUserOrderDetailUserOrderDetail(d);

overFillUserInvoiceDetailOrderDetail(i, o) += ACTION (i, o) {
    IF o IS OrderDetail AND wareItem(skuUserInvoiceDetail(i)) AND NOT skipCreateWareUserInvoiceDetail(i) THEN {
    // делаем, чтобы не INLINE'лось выполнение, чтобы строки посуды при создании из заказа шли всегда после соответствующих строк товаров
        IF 1 == 2 THEN
            BREAK;
        createWareUserInvoiceDetail(i);   
    } 
};
