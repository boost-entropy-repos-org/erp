MODULE SalePurchaseShipmentBin;

REQUIRE PurchaseShipmentBin, SalePurchaseShipment, SaleShipmentBin;

NAMESPACE Sale;

//---------------------------------Ячейка ----------------------------------//

@defineDocumentInterfaceDetailBinCustom(shipmentDetail, purchase, ' (закупка)');

Purchase.binShipmentDetail (detail) += purchaseBinShipmentDetail(shipmentDetailPurchaseShipmentDetail(detail));
showBinCreateUserShipment (shipment) = showBinUserShipment(shipment) AND createPurchaseUserShipment(shipment);
showBinCreateShipment (shipment) = showBinShipment(shipment) AND createPurchaseShipment(shipment);

purchaseBinUserShipmentDetail(detail) <- binStockSku(customerStockUserShipmentDetail(detail), skuUserShipmentDetail(detail))
    WHEN CHANGED(customerStockUserShipmentDetail(detail)) OR
         CHANGED(skuUserShipmentDetail(detail));

EXTEND FORM userShipment
    PROPERTIES(d) BACKGROUND backgroundPurchaseShipment(s) SHOWIF showBinCreateUserShipment(s) namePurchaseBinUserShipmentDetail BEFORE deletesd
;
EXTEND FORM shipments
    PROPERTIES(d) BACKGROUND backgroundPurchaseShipment(s) SHOWIF showBinCreateShipment(s) namePurchaseBinShipmentDetail
;
