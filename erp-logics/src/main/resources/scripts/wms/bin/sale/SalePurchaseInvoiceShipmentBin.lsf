MODULE SalePurchaseInvoiceShipmentBin;

REQUIRE PurchaseShipmentBin, SalePurchaseInvoiceShipment, SaleShipmentBin;

PRIORITY Sale;
//---------------------------------Ячейка ----------------------------------//

@defineDocumentInterfaceDetailBinCustom(invoiceDetail, purchase, ' (закупка)');

Purchase.binInvoiceDetail(detail) += purchaseBinInvoiceDetail(invoiceDetailPurchaseInvoiceDetail(detail));
showBinCreateUserInvoice (invoice) = showBinUserInvoice(invoice) AND createPurchaseShipmentUserInvoice(invoice);
showBinCreateInvoice (invoice) = showBinInvoice(invoice) AND createPurchaseShipmentInvoice(invoice);

purchaseBinUserInvoiceDetail(detail) <- binStockSku(customerStockUserInvoiceDetail(detail), skuUserInvoiceDetail(detail))
    WHEN CHANGED(customerStockUserInvoiceDetail(detail)) OR
         CHANGED(skuUserInvoiceDetail(detail));

EXTEND FORM userInvoice
    PROPERTIES(d) BEFORE nameCustomerStockUserInvoiceDetail(d) SHOWIF showBinCreateUserInvoice(i) BACKGROUND backgroundPurchaseShipmentInvoice(i)
                  namePurchaseBinUserInvoiceDetail
;

EXTEND FORM invoices
    PROPERTIES(d) READONLY BEFORE nameCustomerStockInvoiceDetail(d) SHOWIF showBinCreateInvoice(i) BACKGROUND backgroundPurchaseShipmentInvoice(i)
                  namePurchaseBinInvoiceDetail
;
