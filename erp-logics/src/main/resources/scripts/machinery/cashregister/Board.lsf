MODULE Board;

REQUIRE System,
        POS;
        
// Параметры табло
comPortBoardCashRegister 'Порт табло' = DATA INTEGER (CashRegister) IN base;
comPortBoardCurrentCashRegister 'Порт табло' = comPortBoardCashRegister(currentCashRegister());

baudRateBoardCashRegister 'Скорость табло' = DATA INTEGER (CashRegister) IN base;
baudRateBoardCurrentCashRegister 'Скорость табло' = baudRateBoardCashRegister(currentCashRegister());

EXTEND FORM groupCashRegister
    PROPERTIES(c) comPortBoardCashRegister, baudRateBoardCashRegister
;

// Использование в POS
fiscalBoardDisplayTextReceiptDetail 'Вывести текст на дисплей' = ACTION CUSTOM 'lsfusion.erp.region.by.machinery.board.fiscalboard.FiscalBoardDisplayTextActionProperty' (ReceiptDetail);
fiscalDisplayTextReceiptDetail (receiptDetail) += ACTION IF comPortBoardCashRegister(cashRegisterReceipt(receiptReceiptDetail((receiptDetail)))) THEN fiscalBoardDisplayTextReceiptDetail(receiptDetail);

fiscalBoardResetTextReceipt 'Сбросить текст на дисплее' = ACTION CUSTOM 'lsfusion.erp.region.by.machinery.board.fiscalboard.FiscalBoardResetTextActionProperty' (Receipt);
postPrintReceipt (receipt) += ACTION IF comPortBoardCashRegister(cashRegisterReceipt(receipt)) THEN fiscalBoardResetTextReceipt(receipt);
resetBoardReceipt (receipt) += ACTION IF comPortBoardCashRegister(cashRegisterReceipt(receipt)) THEN fiscalBoardResetTextReceipt(receipt);