MODULE SalePurchaseLabel;

REQUIRE PricingLabel, SalePurchaseInvoice, PurchaseShipmentLabel;

PRIORITY Sale;

// ------------------------------------- Печать ценников ------------------------------ //

statusLabelPriceSaleInvoice 'Статус печати ценника' (invoice) = statusLabelPriceTransactionDocument(purchaseInvoiceInvoice(invoice));
backgroundPrintLabelTransactionSaleInvoice 'Цвет' (invoice) = backgroundPrintLabelTransactionInvoice(purchaseInvoiceInvoice(invoice));
createSaleInvoiceLabelTransaction 'Распечатать ценники' (invoice) = ACTION Purchase.createInvoiceLabelTransaction(purchaseInvoiceInvoice(invoice)) TOOLBAR;
createSnapshotSaleInvoiceLabelTransaction 'Перепечатать ценники' (invoice) = ACTION Purchase.createSnapshotInvoiceLabelTransaction(purchaseInvoiceInvoice(invoice)) TOOLBAR;


showToPrintLabelTransactionSaleInvoice 'Показывать' (invoice) = Purchase.showToPrintLabelTransactionInvoice(purchaseInvoiceInvoice(invoice))
                                                                                      AND isCompanyStock(customerStockInvoice(invoice));

EXTEND FORM invoices
PROPERTIES(i) statusLabelPriceSaleInvoice  BACKGROUND backgroundPrintLabelTransactionSaleInvoice(i) READONLY AFTER isCommissionInvoice(i),
              createSaleInvoiceLabelTransaction FORCE PANEL SHOWIF showToPrintLabelTransactionSaleInvoice(i), 
              createSnapshotSaleInvoiceLabelTransaction FORCE PANEL
;
DESIGN invoices {
    machineryContainer{
        NEW label {
            caption = 'Ценники' ;
            type = CONTAINERV;
            
            MOVE PROPERTY (createSaleInvoiceLabelTransaction(i));
            MOVE PROPERTY (createSnapshotSaleInvoiceLabelTransaction(i));
        }
    }
}