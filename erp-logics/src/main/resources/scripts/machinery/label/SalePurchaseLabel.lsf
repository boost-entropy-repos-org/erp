MODULE SalePurchaseLabel;

REQUIRE SalePurchaseInvoice, PurchaseShipmentLabel;

PRIORITY Sale;

// ------------------------------------- Печать ценников ------------------------------ //

statusLabelPriceSale 'Статус печати ценника' (Invoice invoice) = statusLabel(purchaseInvoice(invoice));
backgroundPrintLabelTransactionSale 'Цвет' (Invoice invoice) = backgroundPrintLabelTransaction(purchaseInvoice(invoice));
createSaleLabelTransaction 'Распечатать ценники' (Invoice invoice) = ACTION createLabelTransaction(purchaseInvoice(invoice)) TOOLBAR;
createSnapshotSaleLabelTransaction 'Перепечатать ценники' (Invoice invoice) = ACTION createSnapshotLabelTransaction(purchaseInvoice(invoice)) TOOLBAR;


showToPrintLabelTransactionSale 'Показывать' (Invoice invoice) = showToPrintLabelTransaction(purchaseInvoice(invoice))
                                                                                      AND isCompany(customerStock(invoice));

EXTEND FORM invoices
PROPERTIES(i) statusLabelPriceSale  BACKGROUND backgroundPrintLabelTransactionSale(i) READONLY AFTER isCommission(i),
              createSaleLabelTransaction FORCE PANEL SHOWIF showToPrintLabelTransactionSale(i), 
              createSnapshotSaleLabelTransaction FORCE PANEL
;
DESIGN invoices {
    machineryContainer{
        NEW label {
            caption = 'Ценники' ;
            type = CONTAINERV;
            
            MOVE PROPERTY (createSaleLabelTransaction(i));
            MOVE PROPERTY (createSnapshotSaleLabelTransaction(i));
        }
    }
}