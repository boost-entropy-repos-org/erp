MODULE SaleLedgerFashion;

REQUIRE SaleLedgerArticle, ItemFashion, PurchaseShipment;

NAMESPACE SaleLedger;

contractSum 'Контрактная сумма' (ledger) = GROUP SUM (cost(SaleLedger ledger, Batch batch) * priceInvoiceDetail(batch))   
        BY ledger;        

nameCollectionItem 'Коллекция' (SaleLedger ledger) = OVERRIDE 'Не определено', nameCollection(sku(ledger));
nameSeasonYearItem 'Год (сезон)' (SaleLedger ledger) = OVERRIDE 'Не определено', nameSeasonYear(sku(ledger));
nameSeasonItem 'Сезон' (SaleLedger ledger) = OVERRIDE 'Не определено', nameSeason(sku(ledger));

EXTEND FORM saleLedger
    PROPERTIES(s) READONLY BEFORE nameSku(s) nameCollectionItem, nameSeasonYearItem, nameSeasonItem

    PROPERTIES(s) READONLY contractSum BEFORE costSum(s)
;

EXTEND FORM saleArticle
    PROPERTIES(ar) READONLY nameSeasonYear, nameSeason, nameCollection
;
nameCollectionArticle 'Коллекция' (Batch b) =  nameCollection(article(sku(b)));
nameSeasonYear 'Год' (Batch b) =  nameSeasonYear(sku(b));

