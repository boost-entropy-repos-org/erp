MODULE StockPharmacy;

REQUIRE SkuLedger;

NAMESPACE Stock;

showSeriesPharmacy 'Показывать серию лекарственного средства' = DATA BOOLEAN ();
showContractPrice 'Показывать контрактную цену' = DATA BOOLEAN ();
showImportCountry 'Показывать страну ввоза' = DATA BOOLEAN ();
showBalanceB 'Показывать остаток по партии в инвентаризационной описи' = DATA BOOLEAN ();

EXTEND FORM options
    PROPERTIES() showSeriesPharmacy, showContractPrice, showImportCountry, showBalanceB
;

DESIGN options {
    pane {
        NEW pharmacy {   
            type = CONTAINERV;
            caption = 'Фармация';
            MOVE PROPERTY(showSeriesPharmacy());
            MOVE PROPERTY(showContractPrice());
            MOVE PROPERTY(showImportCountry());
            MOVE PROPERTY(showBalanceB());
        }
    }
}                                                                                                           

seriesPharmacy 'Серия лекарственного средства' = ABSTRACT VARSTRING[20] (Batch) MATERIALIZED;
prevSeriesPharmacy (Batch batch) = PREV(seriesPharmacy(batch));

contractPrice 'Контрактная цена' = ABSTRACT VARSTRING[20] (Batch) MATERIALIZED;
prevContractPrice = PREV(contractPrice(Batch batch));

importCountry 'Страна ввоза' = ABSTRACT Country (Batch);
nameImportCountry 'Страна ввоза' = name(importCountry(Batch batch)) MINCHARWIDTH 15 PREFCHARWIDTH 15;

EXTEND FORM currentBalanceBatchStock
    PROPERTIES READONLY seriesPharmacy(bt) SHOWIF showSeriesPharmacy() AFTER nameSku(bt),
                        contractPrice(bt) SHOWIF showContractPrice() AFTER nameSku(bt),
                        nameImportCountry(bt) SHOWIF showImportCountry() AFTER nameSku(bt)
;

EXTEND FORM balanceBatchStock
    PROPERTIES READONLY seriesPharmacy(bt) SHOWIF showSeriesPharmacy() AFTER nameSku(bt),
                        contractPrice(bt) SHOWIF showContractPrice() AFTER nameSku(bt),
                        nameImportCountry(bt) SHOWIF showImportCountry() AFTER nameSku(bt)
;

EXTEND FORM dialogBatchStockOut
    PROPERTIES READONLY seriesPharmacy(bt) SHOWIF showSeriesPharmacy() AFTER nameSku(bt),
                        contractPrice(bt) SHOWIF showContractPrice() AFTER nameSku(bt),
                        nameImportCountry(bt) SHOWIF showImportCountry() AFTER nameSku(bt)
;

EXTEND FORM batches
    PROPERTIES READONLY seriesPharmacy(bt) SHOWIF showSeriesPharmacy() AFTER nameSku(bt),
                        contractPrice(bt) SHOWIF showContractPrice() AFTER nameSku(bt),
                        nameImportCountry(bt) SHOWIF showImportCountry() AFTER nameSku(bt)
;


