MODULE PurchaseShipmentPharmacy;

REQUIRE PurchaseShipment, PurchaseInvoicePharmacy, StockPharmacy;

NAMESPACE Purchase;

seriesPharmacyShipmentDetail 'Серия лекарственного средства' = ABSTRACT VARSTRING[100] (ShipmentDetail) MINCHARWIDTH 20 PREFCHARWIDTH 40;

seriesPharmacyUserShipmentDetail 'Серия лекарственного средства' = DATA VARSTRING[100] (UserShipmentDetail) MINCHARWIDTH 20 PREFCHARWIDTH 40;

@defineDocumentAggregationDetailProperty (invoice, invoiceShipment, seriesPharmacy, 'Серия лекарственного средства');

seriesPharmacyShipmentDetail(detail) += seriesPharmacyUserShipmentDetail(detail);
seriesPharmacyShipmentDetail(detail) += seriesPharmacyInvoiceShipmentDetail(detail);

seriesPharmacyBatch (batch) += seriesPharmacyShipmentDetail(shipmentDetailShipmentBatch(batch));


EXTEND FORM userShipment
    PROPERTIES(d) seriesPharmacyShipmentDetail SHOWIF showSeriesPharmacy() BEFORE nameBatchUserShipmentDetail
;

EXTEND FORM shipments
    PROPERTIES(d) READONLY seriesPharmacyShipmentDetail SHOWIF showSeriesPharmacy() BEFORE nameBatchShipmentDetail
;