MODULE SalePurchaseInvoicePharmacy;

REQUIRE PurchaseInvoicePharmacy, SalePurchaseInvoice, PurchaseCompliance, SaleCompliance;

NAMESPACE Sale;

setPropertiesPurchaseSale(Purchase.UserInvoiceDetail d, InvoiceDetail invoiceDetail) += ACTION {
    IF notUseBatchPurchaseInvoice(operation(invoice(invoiceDetail))) THEN {
        seriesPharmacy(d) <- seriesPharmacy(batch(invoiceDetail));
        compliance(d) <- compliance(invoiceDetail);
        importCountry(d) <- importCountry(batch(invoiceDetail));
        contractPrice(d) <- contractPrice(batch(invoiceDetail));
        expiryDate(d) <- expiryDate(batch(invoiceDetail));
    }
}