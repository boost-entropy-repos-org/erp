MODULE ItemPharmacy;

REQUIRE Item;

NAMESPACE Item;

GROUP itemPharmacy 'Фармакологические свойства';

// Действующее вещество
CLASS Substance 'Действующее вещество';
TABLE substance(Substance);

nameSubstance 'Наименование' = DATA VARISTRING[100](Substance);
substanceName = GROUP AGGR s BY nameSubstance(s);
@defineExternalizable(substance, VARSTRING[100]);

FORM substance 'Действующие вещества'
    OBJECTS t=Substance FIXED PANEL
    PROPERTIES(t) nameSubstance, idSubstance SHOWIF showIDs()
    EDIT Substance OBJECT t
;

FORM substances 'Действующие вещества'
    OBJECTS t=Substance
    PROPERTIES(t) nameSubstance READONLY, idSubstance SHOWIF showIDs() READONLY, DELETE FORCE PANEL TOOLBAR
    PROPERTIES(t) ADDFORM, EDITFORM
    ORDER BY nameSubstance(t)
    DIALOG Substance OBJECT t
;
DESIGN substances { main{ preferredSize = (600, 400); } }

@defineObjectItemAttribute(substance, Substance, name, 'Действующее вещество', itemPharmacy);

@defineItemFilterValue(substance, 'Действующее вещество', t);

@defineUniteAttributeItem(substance, name, 'действующее вещество', 'действующие вещества', item);

EXTEND FORM attributesItem
    PROPERTIES READONLY AFTER nameSubstance(substance) idSubstance(substance) SHOWIF showIDs()
;
@defineObjectItemAttributeBatch (substance, nameSubstance, 'Действующее вещество');

DESIGN item {
    itemPrimaryColumn1 {
        MOVE i.itemPharmacy {
            columns = 2;
        }
    }
}

DESIGN itemGroup {
    main {
        itemGroupDetail {
            MOVE g.itemPharmacy {
                type = CONTAINERH;
            };
        }
    }
}

