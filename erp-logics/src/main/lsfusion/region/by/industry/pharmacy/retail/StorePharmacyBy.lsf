MODULE StorePharmacyBy;

REQUIRE StoreBy;

NAMESPACE Store;

CLASS PharmacyCategory 'Категория аптеки' {
    first 'Первая категория',
    second 'Вторая категория',
    third 'Третья категория',
    fourth 'Четвертая категория',
    fifth 'Пятая категория'   
}

order 'Номер' (PharmacyCategory pharmacyCategory) = CASE
    WHEN pharmacyCategory == PharmacyCategory.first THEN '1'
    WHEN pharmacyCategory == PharmacyCategory.second THEN '2'
    WHEN pharmacyCategory == PharmacyCategory.third THEN '3'
    WHEN pharmacyCategory == PharmacyCategory.fourth THEN '4'
    WHEN pharmacyCategory == PharmacyCategory.fifth THEN '5'
;    

FORM pharmacyCategories 'Категории аптек'
    OBJECTS pc = PharmacyCategory
    PROPERTIES(pc) READONLY order, staticCaption
    ORDER order(pc)
    LIST PharmacyCategory OBJECT pc
;
pharmacyCategory 'Категория' = DATA PharmacyCategory (Store);
namePharmacyCategory 'Категория' (Store store) =  staticCaption(pharmacyCategory(store)) IN id;

pharmacyCategory 'Категория' (DepartmentStore dep) = pharmacyCategory(store(dep));
namePharmacyCategory 'Категория' (DepartmentStore dep) = staticCaption(pharmacyCategory(dep));

EXTEND FORM store
    PROPERTIES (s) namePharmacyCategory
;

DESIGN store {
    headerExtraParams {
        MOVE PROPERTY(namePharmacyCategory(s));
    }
}

EXTEND FORM stores
    PROPERTIES (s) READONLY namePharmacyCategory AFTER nameLegalEntity(s)
;