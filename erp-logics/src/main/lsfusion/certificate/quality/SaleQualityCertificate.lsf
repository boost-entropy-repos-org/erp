MODULE SaleQualityCertificate;

REQUIRE QualityCertificate, SaleCertificate;

NAMESPACE Sale;

@defineDocumentCertificate(qualityCertificate, invoice, i, 'Сертификат качества');
@defineDocumentCertificateConstraint(qualityCertificate, invoice, 'сертификат качества');
@deriveDocumentSaleCertificate(qualityCertificate, invoice, supplierStock, data);

@defineDocumentCertificate(qualityCertificate, shipment, s, 'Сертификат качества');
qualityCertificate(InvoiceShipmentDetail detail) += qualityCertificate(invoiceDetail(detail));

overFillInvoice(UserShipmentDetail s, InvoiceDetail i) + { 
    dataQualityCertificate(s) <- qualityCertificate(i);
}
@defineDocumentCertificateConstraint(qualityCertificate, shipment, 'сертификат качества');
@deriveDocumentSaleCertificate(qualityCertificate, shipment, supplierStock, data);
