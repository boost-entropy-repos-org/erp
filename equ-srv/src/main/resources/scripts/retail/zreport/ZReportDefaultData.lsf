MODULE ZReportDefaultData;

REQUIRE ZReport, DefaultData;

NAMESPACE ZReport;

//---------------------------------------------- Генерация Z-отчета -------------------------------------------------//

generateZReport 'Сгенерировать Z-отчёт' = ACTION CUSTOM 'equ.srv.actions.GenerateZReport' ();
averageZReportCountGenerateZReport 'Среднее число Z-отчётов' = DATA INTEGER ();
averageReceiptCountGenerateZReport 'Среднее число чеков' = DATA INTEGER ();
averageReceiptDetailCountGenerateZReport 'Среднее число строк в чеке' = DATA INTEGER ();
priceListTypeGenerateZReport 'Вид цен' = DATA PriceListType ();
namePriceListTypeGenerateZReport 'Вид цен' () = namePriceListType(priceListTypeGenerateZReport());
dateFromGenerateZReport 'Дата (с)' = DATA DATETIME ();
dateToGenerateZReport 'Дата (по)' = DATA DATETIME ();

maxNumberZReport(cashRegister) = GROUP MAX INTEGER(numberZReport(zReport))  BY cashRegisterZReport (zReport);
priceSkuStock 'Цена' (sku, departmentStore) = priceAPriceListTypeSkuStockDateTime(priceListTypeGenerateZReport(),
                                                                                  sku,
                                                                                  departmentStore,
                                                                                  dateFromGenerateZReport());

EXTEND FORM defaultData
    PROPERTIES()    generateZReport, averageZReportCountGenerateZReport, averageReceiptCountGenerateZReport, averageReceiptDetailCountGenerateZReport,
                    namePriceListTypeGenerateZReport, dateFromGenerateZReport, dateToGenerateZReport

;

DESIGN defaultData {
    pane {
        NEW ZReport {
            caption = 'Z-отчёт';
            type = CONTAINERV;
            MOVE PROPERTY(averageZReportCountGenerateZReport());
            MOVE PROPERTY(averageReceiptCountGenerateZReport());
            MOVE PROPERTY(averageReceiptDetailCountGenerateZReport());
            MOVE PROPERTY(namePriceListTypeGenerateZReport());
            MOVE PROPERTY(dateFromGenerateZReport());
            MOVE PROPERTY(dateToGenerateZReport());
            MOVE PROPERTY(generateZReport());
        }
    }
}
